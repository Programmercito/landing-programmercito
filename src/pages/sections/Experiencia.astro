---
import Chip from "../../components/opciones/Chip.astro";
import Subtitle from "../../components/opciones/Subtitle.astro";
import TextResalt from "../../components/opciones/TextResalt.astro";
import TitleSection from "../../components/opciones/TitleSection.astro";
import Section from "../../components/Section.astro";
import links from "../../data/experiencia.json";
---

<Section id="experiencia">
  <!-- Texto y botones -->
  <div class="order-2 md:order-1 text-center md:text-left">
    <TitleSection>Experiencia</TitleSection>

    {
      links.map((link, idx) => {
        const content = (
          <div class="group">
            <div class="p-3 bg-white rounded-lg shadow group-hover:shadow-2xl transition-all w-full">
              <div class="flex flex-col md:flex-row md:items-start md:justify-between">
                <div>
                  <Subtitle>{link.name}</Subtitle>
                  <TextResalt>{link.position}</TextResalt>
                  <div class="text-sm text-gray-600">
                    {link.startDate} -{" "}
                    {link.endDate && link.endDate.trim() !== ""
                      ? link.endDate
                      : "Actualidad"}
                  </div>
                </div>
                {link.location && (
                  <span class="text-xs text-gray-500 flex items-center gap-1 self-center md:self-start mt-2 md:mt-0">
                    <span>üìç</span>
                    <span>{link.location}</span>
                  </span>
                )}
              </div>
              <p class="mt-2 text-justify [text-justify:inter-word]">
                {link.summary}
              </p>
              {link.highlights && link.highlights.length > 0 && (
                <div class="flex flex-wrap gap-2 mt-3 justify-center">
                  {link.highlights.map((highlight) => (
                    <Chip text={highlight} />
                  ))}
                </div>
              )}
            </div>
          </div>
        );
        return idx > 3
          ? <div class="hidden">{content}</div>
          : content;
      })
    }
  </div>
</Section>
